<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tate Academy - Deviate DC 2026</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Leaflet CSS & JS for Interactive Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(4px);
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .tab-btn {
            transition: all 0.2s ease;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }

        .cal-btn {
            transition: all 0.2s ease;
        }

        .cal-btn:hover {
            transform: translateY(-1px);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .division-junior { background: #fef3c7; color: #92400e; }
        .division-preteen { background: #dbeafe; color: #1e40af; }
        .division-teen { background: #dcfce7; color: #166534; }
        .division-senior { background: #fce7f3; color: #9d174d; }

        .type-solo { background: #fecaca; color: #991b1b; }
        .type-group { background: #bfdbfe; color: #1e40af; }
        .type-line { background: #c7d2fe; color: #3730a3; }
        .type-production { background: #ddd6fe; color: #5b21b6; }
        .type-trio { background: #fbcfe8; color: #9d174d; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-gradient-to-r from-violet-600 to-purple-600 text-white sticky top-0 z-50 shadow-lg">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold tracking-tight">Tate Academy Company</h1>
                    <p class="text-violet-200 text-sm">Deviate (The Process) - Washington DC</p>
                    <p class="text-violet-300 text-xs mt-1">February 13-15, 2026</p>
                </div>
                <div id="clock" class="text-sm font-semibold bg-white/20 px-3 py-1 rounded-full"></div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <nav class="max-w-4xl mx-auto px-2 pb-2 flex space-x-1 overflow-x-auto" id="nav-container"></nav>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-4xl mx-auto w-full p-4">
        <div id="content-container"></div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-100 border-t border-slate-200 py-4 mt-8">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <p class="text-xs text-slate-400">Tate Academy Company - Deviate DC 2026</p>
            <p class="text-xs text-slate-300 mt-1">Go Team!</p>
        </div>
    </footer>

    <script>
        // --- State Management ---
        const state = {
            currentTab: 'schedule',
            ageFilter: 'all'
        };

        // --- Event Information ---
        const eventInfo = {
            name: "Deviate (The Process)",
            location: "Washington DC",
            dates: "February 13-15, 2026",
            venue: "Marriott Wardman Park",
            venueAddress: "2660 Woodley Rd NW, Washington, DC 20008",
            venueLat: 38.9296,
            venueLng: -77.0536
        };

        // --- Convention Schedule ---
        const conventionSchedule = {
            thursday: {
                date: "Thursday, Feb 12",
                note: "Travel Day - Check-in",
                classes: []
            },
            friday: {
                date: "Friday, Feb 13",
                classes: [
                    { time: "8:00 AM - 9:30 AM", name: "Junior/PreTeen Technique", ages: ["junior", "preteen"], room: "Ballroom A" },
                    { time: "9:45 AM - 11:15 AM", name: "Junior/PreTeen Jazz", ages: ["junior", "preteen"], room: "Ballroom A" },
                    { time: "11:30 AM - 1:00 PM", name: "Junior/PreTeen Contemporary", ages: ["junior", "preteen"], room: "Ballroom A" },
                    { time: "1:00 PM - 2:00 PM", name: "Lunch Break", ages: ["all"], room: "" },
                    { time: "2:00 PM - 3:30 PM", name: "Teen/Senior Technique", ages: ["teen", "senior"], room: "Ballroom B" },
                    { time: "3:45 PM - 5:15 PM", name: "Teen/Senior Jazz", ages: ["teen", "senior"], room: "Ballroom B" },
                    { time: "5:30 PM - 7:00 PM", name: "Teen/Senior Contemporary", ages: ["teen", "senior"], room: "Ballroom B" }
                ]
            },
            saturday: {
                date: "Saturday, Feb 14",
                classes: [
                    { time: "8:00 AM - 9:30 AM", name: "Junior/PreTeen Hip Hop", ages: ["junior", "preteen"], room: "Ballroom A" },
                    { time: "9:45 AM - 11:15 AM", name: "Junior/PreTeen Lyrical", ages: ["junior", "preteen"], room: "Ballroom A" },
                    { time: "11:30 AM - 1:00 PM", name: "All Ages Master Class", ages: ["all"], room: "Grand Ballroom" },
                    { time: "1:00 PM - 2:00 PM", name: "Lunch Break", ages: ["all"], room: "" },
                    { time: "2:00 PM - 3:30 PM", name: "Teen/Senior Hip Hop", ages: ["teen", "senior"], room: "Ballroom B" },
                    { time: "3:45 PM - 5:15 PM", name: "Teen/Senior Lyrical", ages: ["teen", "senior"], room: "Ballroom B" },
                    { time: "6:00 PM", name: "Competition Begins", ages: ["all"], room: "Main Stage" }
                ]
            },
            sunday: {
                date: "Sunday, Feb 15",
                classes: [
                    { time: "9:00 AM - 10:30 AM", name: "All Ages Improv Workshop", ages: ["all"], room: "Ballroom A" },
                    { time: "11:00 AM - 12:30 PM", name: "Choreography Intensive", ages: ["teen", "senior"], room: "Ballroom B" },
                    { time: "1:00 PM", name: "Awards Ceremony", ages: ["all"], room: "Grand Ballroom" },
                    { time: "3:00 PM", name: "Departure", ages: ["all"], room: "" }
                ]
            }
        };

        // --- Competition Dance Order (Friday 2/13/26) ---
        const danceOrder = [
            { num: 1, time: "9:00 AM", name: "Raspberry Beret", dancer: "Bella", division: "Junior", style: "Jazz", type: "Solo" },
            { num: 4, time: "9:08 AM", name: "Le Freak", dancer: "Anaya", division: "Junior", style: "Jazz", type: "Solo" },
            { num: 7, time: "9:16 AM", name: "Wings", dancer: "Liana", division: "", style: "", type: "Solo" },
            { num: 22, time: "10:00 AM", name: "Slow It Down", dancer: "Ella B", division: "", style: "", type: "Solo" },
            { num: 25, time: "10:08 AM", name: "Work Me", dancer: "", division: "", style: "", type: "Group" },
            { num: 30, time: "10:23 AM", name: "Just Like A River Does", dancer: "", division: "", style: "", type: "Group" },
            { num: 34, time: "10:37 AM", name: "Fly", dancer: "", division: "", style: "", type: "Group" },
            { num: 41, time: "11:00 AM", name: "White Rabbit", dancer: "", division: "PreTeen", style: "Contemporary", type: "Group" },
            { num: 47, time: "11:19 AM", name: "Know About Me", dancer: "", division: "", style: "", type: "Group" },
            { num: 48, time: "11:55 AM", name: "The Way", dancer: "", division: "PreTeen", style: "Jazz", type: "Group" },
            { num: 53, time: "12:09 PM", name: "What The World Need Now", dancer: "", division: "Teen", style: "Lyrical", type: "Trio" },
            { num: 59, time: "12:28 PM", name: "Hairspray", dancer: "", division: "Mini/Teen", style: "Jazz", type: "Group" },
            { num: null, time: "1:00 PM", name: "Awards 6-12", dancer: "", division: "", style: "", type: "Awards", isAwards: true },
            { num: 64, time: "1:48 PM", name: "Corps", dancer: "", division: "", style: "", type: "Group" },
            { num: 73, time: "2:16 PM", name: "Other Side", dancer: "Carly", division: "Teen", style: "Contemporary", type: "Solo" },
            { num: 74, time: "2:19 PM", name: "When I Go", dancer: "Robbie", division: "PreTeen", style: "Contemporary", type: "Solo" },
            { num: 82, time: "2:43 PM", name: "I Dreamed A Dream", dancer: "Zoe", division: "PreTeen", style: "Lyrical", type: "Solo" },
            { num: 83, time: "2:46 PM", name: "River", dancer: "Eden", division: "PreTeen", style: "Lyrical", type: "Solo" },
            { num: 108, time: "4:20 PM", name: "Winner Takes It All", dancer: "Lula", division: "Senior", style: "Contemporary", type: "Solo" },
            { num: 110, time: "4:26 PM", name: "These Arms Of Mine", dancer: "Chloe", division: "Senior", style: "Contemporary", type: "Solo" },
            { num: 115, time: "4:42 PM", name: "Out There", dancer: "Alina", division: "Senior", style: "Contemporary", type: "Solo" },
            { num: 123, time: "5:08 PM", name: "Dead & Done", dancer: "", division: "Senior", style: "Contemporary", type: "Group" },
            { num: 136, time: "5:57 PM", name: "Tennessee Whiskey", dancer: "Liam", division: "Senior", style: "Contemporary", type: "Solo" },
            { num: 146, time: "6:34 PM", name: "Cry To Me", dancer: "", division: "Senior", style: "Jazz", type: "Group" },
            { num: 150, time: "6:48 PM", name: "End Of Love", dancer: "", division: "Senior", style: "Lyrical", type: "Line" },
            { num: 152, time: "7:30 PM", name: "Golden Years", dancer: "", division: "Teen", style: "Jazz", type: "Production" },
            { num: 156, time: "7:48 PM", name: "Dreams", dancer: "Ella G.", division: "Senior", style: "Jazz", type: "Solo" },
            { num: 164, time: "8:16 PM", name: "Foolish Games", dancer: "Talia G.", division: "Senior", style: "Lyrical", type: "Solo" },
            { num: 166, time: "8:22 PM", name: "One More Second", dancer: "Talya B.", division: "Senior", style: "Lyrical", type: "Solo" },
            { num: 170, time: "8:35 PM", name: "Lose Yourself", dancer: "Riley", division: "Senior", style: "Hip Hop", type: "Solo" },
            { num: 175, time: "8:50 PM", name: "Cellophane", dancer: "", division: "Senior", style: "Lyrical", type: "Group" },
            { num: 179, time: "9:02 PM", name: "Kendrick", dancer: "", division: "Senior", style: "Hip Hop", type: "Group" },
            { num: null, time: "9:40 PM", name: "Awards 13+", dancer: "", division: "", style: "", type: "Awards", isAwards: true }
        ];

        // --- Places to Eat (Near Marriott Wardman Park, DC) ---
        const placesToEat = {
            walkable: [
                { name: "Open City", type: "American/Brunch", distance: "0.1 mi", address: "2331 Calvert St NW", price: "$$", lat: 38.9216, lng: -77.0485, note: "Great for breakfast/brunch" },
                { name: "Petits Plats", type: "French", distance: "0.2 mi", address: "2653 Connecticut Ave NW", price: "$$", lat: 38.9280, lng: -77.0510, note: "Cozy French bistro" },
                { name: "Nanny O'Brien's", type: "Irish Pub", distance: "0.3 mi", address: "3319 Connecticut Ave NW", price: "$$", lat: 38.9350, lng: -77.0580, note: "Casual pub fare" },
                { name: "Bindaas", type: "Indian Street Food", distance: "0.3 mi", address: "2000 18th St NW", price: "$$", lat: 38.9150, lng: -77.0420, note: "Fast-casual Indian" },
                { name: "Diner", type: "American/Diner", distance: "0.4 mi", address: "2453 18th St NW", price: "$", lat: 38.9200, lng: -77.0430, note: "24-hour diner, great for late night" },
                { name: "Amsterdam Falafelshop", type: "Middle Eastern", distance: "0.4 mi", address: "2425 18th St NW", price: "$", lat: 38.9195, lng: -77.0428, note: "Quick & delicious falafel" },
                { name: "Mintwood Place", type: "American", distance: "0.5 mi", address: "1813 Columbia Rd NW", price: "$$$", lat: 38.9220, lng: -77.0400, note: "Upscale American" }
            ],
            delivery: [
                { name: "Domino's Pizza", type: "Pizza", phone: "(202) 232-8400", apps: ["DoorDash", "UberEats"] },
                { name: "Chipotle", type: "Mexican", phone: "", apps: ["DoorDash", "UberEats", "Chipotle App"] },
                { name: "Sweetgreen", type: "Salads/Bowls", phone: "", apps: ["DoorDash", "Sweetgreen App"] },
                { name: "CAVA", type: "Mediterranean", phone: "", apps: ["DoorDash", "UberEats", "CAVA App"] },
                { name: "Chick-fil-A", type: "Chicken", phone: "", apps: ["DoorDash", "UberEats", "CFA App"] },
                { name: "Panera Bread", type: "Bakery/Soup/Salad", phone: "", apps: ["DoorDash", "Panera App"] },
                { name: "Wawa", type: "Sandwiches/Convenience", phone: "", apps: ["DoorDash", "Wawa App"] }
            ]
        };

        // --- Nearby Activities ---
        const nearbyActivities = [
            { name: "National Zoo", type: "Attraction", distance: "0.3 mi", address: "3001 Connecticut Ave NW", note: "FREE admission! Pandas, elephants, lions. Open 8am-5pm.", icon: "üêº", lat: 38.9296, lng: -77.0499 },
            { name: "Rock Creek Park", type: "Nature", distance: "0.2 mi", address: "Beach Dr NW", note: "Beautiful walking trails, nature center. Great for a morning walk.", icon: "üå≥", lat: 38.9400, lng: -77.0500 },
            { name: "Adams Morgan", type: "Neighborhood", distance: "0.5 mi", address: "18th St NW", note: "Vibrant neighborhood with shops, murals, and diverse restaurants.", icon: "üé®", lat: 38.9215, lng: -77.0425 },
            { name: "Smithsonian Museums", type: "Museums", distance: "2.5 mi", address: "National Mall", note: "All FREE! Natural History, Air & Space, American History. Metro accessible.", icon: "üèõÔ∏è", lat: 38.8881, lng: -77.0260 },
            { name: "Georgetown", type: "Shopping", distance: "2 mi", address: "M Street NW", note: "Upscale shopping, waterfront, Georgetown Cupcake!", icon: "üõçÔ∏è", lat: 38.9055, lng: -77.0639 },
            { name: "DC Monuments", type: "Landmarks", distance: "3 mi", address: "National Mall", note: "Lincoln Memorial, Washington Monument, WWII Memorial. Best at sunset!", icon: "üèõÔ∏è", lat: 38.8893, lng: -77.0502 },
            { name: "Dupont Circle", type: "Neighborhood", distance: "1.2 mi", address: "Dupont Circle", note: "Historic neighborhood, bookshops, Sunday farmers market.", icon: "üå∏", lat: 38.9096, lng: -77.0434 },
            { name: "National Cathedral", type: "Landmark", distance: "1 mi", address: "3101 Wisconsin Ave NW", note: "Stunning Gothic cathedral with gardens. Tower tours available.", icon: "‚õ™", lat: 38.9306, lng: -77.0707 }
        ];

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderClock();
            renderTabs();
            switchTab('schedule');
            setInterval(renderClock, 60000);
        });

        // --- Functions ---
        function renderClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            document.getElementById('clock').textContent = timeString;
        }

        function renderTabs() {
            const tabs = [
                { id: 'schedule', label: 'üìÖ Schedule' },
                { id: 'dances', label: 'üé≠ Dance Order' },
                { id: 'food', label: 'üçΩÔ∏è Places to Eat' },
                { id: 'activities', label: 'üó∫Ô∏è Things to Do' }
            ];

            const nav = document.getElementById('nav-container');
            nav.innerHTML = '';

            tabs.forEach(tab => {
                const btn = document.createElement('button');
                btn.className = `tab-btn flex-shrink-0 px-4 py-2 text-sm font-medium rounded-lg ${state.currentTab === tab.id ? 'active' : 'bg-white/20 text-white hover:bg-white/30'}`;
                btn.textContent = tab.label;
                btn.onclick = () => switchTab(tab.id);
                nav.appendChild(btn);
            });
        }

        function switchTab(tabId) {
            state.currentTab = tabId;
            renderTabs();

            const container = document.getElementById('content-container');

            switch(tabId) {
                case 'schedule':
                    renderSchedule(container);
                    break;
                case 'dances':
                    renderDanceOrder(container);
                    break;
                case 'food':
                    renderFood(container);
                    break;
                case 'activities':
                    renderActivities(container);
                    break;
            }
        }

        // --- Generate Google Calendar Link ---
        function generateCalendarLink(title, date, startTime, endTime, location) {
            // Parse date and times for Google Calendar format
            const dateStr = date.replace(/[^0-9]/g, '');
            const start = startTime.replace(/[^0-9APMapm]/g, '');
            const end = endTime ? endTime.replace(/[^0-9APMapm]/g, '') : '';

            // For simplicity, create a basic Google Calendar link
            const eventTitle = encodeURIComponent(`Deviate DC: ${title}`);
            const eventLocation = encodeURIComponent(location || eventInfo.venueAddress);
            const details = encodeURIComponent(`Tate Academy Company - Deviate (The Process) DC 2026`);

            // Construct dates (simplified - would need proper date parsing in production)
            const baseUrl = 'https://calendar.google.com/calendar/render?action=TEMPLATE';
            return `${baseUrl}&text=${eventTitle}&location=${eventLocation}&details=${details}`;
        }

        // --- Render Schedule ---
        function renderSchedule(container) {
            let html = `
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-violet-50 to-purple-50 p-4 rounded-xl border border-violet-100">
                        <h2 class="text-xl font-bold text-violet-800 mb-2">Convention Schedule</h2>
                        <p class="text-sm text-slate-600">
                            <strong>Venue:</strong> ${eventInfo.venue}<br>
                            <strong>Address:</strong> ${eventInfo.venueAddress}
                        </p>
                    </div>

                    <!-- Age Filter -->
                    <div class="flex flex-wrap gap-2">
                        <span class="text-sm text-slate-500 self-center">Filter by age:</span>
                        <button onclick="filterAge('all')" class="px-3 py-1 text-xs rounded-full ${state.ageFilter === 'all' ? 'bg-violet-600 text-white' : 'bg-slate-200 text-slate-600'}">All</button>
                        <button onclick="filterAge('junior')" class="px-3 py-1 text-xs rounded-full ${state.ageFilter === 'junior' ? 'bg-yellow-500 text-white' : 'bg-yellow-100 text-yellow-700'}">Junior</button>
                        <button onclick="filterAge('preteen')" class="px-3 py-1 text-xs rounded-full ${state.ageFilter === 'preteen' ? 'bg-blue-500 text-white' : 'bg-blue-100 text-blue-700'}">PreTeen</button>
                        <button onclick="filterAge('teen')" class="px-3 py-1 text-xs rounded-full ${state.ageFilter === 'teen' ? 'bg-green-500 text-white' : 'bg-green-100 text-green-700'}">Teen</button>
                        <button onclick="filterAge('senior')" class="px-3 py-1 text-xs rounded-full ${state.ageFilter === 'senior' ? 'bg-pink-500 text-white' : 'bg-pink-100 text-pink-700'}">Senior</button>
                    </div>
            `;

            // Render each day
            Object.entries(conventionSchedule).forEach(([dayKey, day]) => {
                html += `
                    <div class="glass-card rounded-xl overflow-hidden">
                        <div class="bg-violet-600 text-white px-4 py-3 flex justify-between items-center">
                            <h3 class="font-bold">${day.date}</h3>
                            ${day.classes.length > 0 ? `<button onclick="addAllToCalendar('${dayKey}')" class="cal-btn text-xs bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full">+ Add All to Calendar</button>` : ''}
                        </div>
                        ${day.note ? `<div class="bg-violet-50 px-4 py-2 text-sm text-violet-700">${day.note}</div>` : ''}
                        <div class="divide-y divide-slate-100">
                `;

                if (day.classes.length === 0) {
                    html += `<div class="p-4 text-center text-slate-400">No classes scheduled</div>`;
                } else {
                    day.classes.forEach((cls, idx) => {
                        const showClass = state.ageFilter === 'all' || cls.ages.includes(state.ageFilter) || cls.ages.includes('all');
                        if (!showClass) return;

                        const ageLabels = cls.ages.filter(a => a !== 'all').map(a => {
                            const colors = {
                                junior: 'division-junior',
                                preteen: 'division-preteen',
                                teen: 'division-teen',
                                senior: 'division-senior'
                            };
                            return `<span class="text-xs px-2 py-0.5 rounded ${colors[a] || 'bg-slate-100'}">${a.charAt(0).toUpperCase() + a.slice(1)}</span>`;
                        }).join(' ');

                        html += `
                            <div class="p-4 flex justify-between items-center hover:bg-slate-50">
                                <div class="flex-grow">
                                    <div class="flex items-center gap-2 flex-wrap">
                                        <span class="font-mono text-sm text-violet-600 font-semibold">${cls.time}</span>
                                        ${ageLabels}
                                    </div>
                                    <div class="font-medium text-slate-800 mt-1">${cls.name}</div>
                                    ${cls.room ? `<div class="text-xs text-slate-400">${cls.room}</div>` : ''}
                                </div>
                                <button onclick="addToCalendar('${cls.name}', '${cls.time}')" class="cal-btn text-violet-600 hover:text-violet-800 text-sm flex items-center gap-1">
                                    <span>+</span>
                                    <span class="hidden sm:inline">Calendar</span>
                                </button>
                            </div>
                        `;
                    });
                }

                html += `</div></div>`;
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        function filterAge(age) {
            state.ageFilter = age;
            renderSchedule(document.getElementById('content-container'));
        }

        function addToCalendar(title, time) {
            const link = generateCalendarLink(title, '2026-02-13', time, '', eventInfo.venueAddress);
            window.open(link, '_blank');
        }

        function addAllToCalendar(dayKey) {
            alert(`Opening calendar to add all ${conventionSchedule[dayKey].date} classes...`);
            // In production, this would create a batch calendar add
        }

        // --- Render Dance Order ---
        function renderDanceOrder(container) {
            let html = `
                <div class="space-y-4">
                    <div class="bg-gradient-to-r from-violet-50 to-purple-50 p-4 rounded-xl border border-violet-100">
                        <h2 class="text-xl font-bold text-violet-800 mb-2">Competition Dance Order</h2>
                        <p class="text-sm text-slate-600">Friday, February 13, 2026 - Performance Schedule</p>
                    </div>

                    <div class="glass-card rounded-xl overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-slate-100">
                                    <tr>
                                        <th class="px-3 py-3 text-left text-xs font-semibold text-slate-600">#</th>
                                        <th class="px-3 py-3 text-left text-xs font-semibold text-slate-600">Time</th>
                                        <th class="px-3 py-3 text-left text-xs font-semibold text-slate-600">Routine</th>
                                        <th class="px-3 py-3 text-left text-xs font-semibold text-slate-600">Dancer</th>
                                        <th class="px-3 py-3 text-left text-xs font-semibold text-slate-600">Division</th>
                                        <th class="px-3 py-3 text-left text-xs font-semibold text-slate-600">Type</th>
                                    </tr>
                                </thead>
                                <tbody>
            `;

            danceOrder.forEach(dance => {
                const isAwards = dance.isAwards;
                const rowClass = isAwards
                    ? 'bg-violet-100 font-semibold'
                    : dance.dancer ? 'bg-white hover:bg-slate-50' : 'bg-slate-50 hover:bg-slate-100';

                const divisionClass = dance.division ? `division-${dance.division.toLowerCase().replace('/', '-')}` : '';
                const typeClass = dance.type ? `type-${dance.type.toLowerCase()}` : '';

                html += `
                    <tr class="${rowClass} border-b border-slate-100">
                        <td class="px-3 py-3 text-slate-500 font-mono">${dance.num || '-'}</td>
                        <td class="px-3 py-3 text-violet-600 font-mono font-semibold">${dance.time}</td>
                        <td class="px-3 py-3 text-slate-800 font-medium">${dance.name}</td>
                        <td class="px-3 py-3 ${dance.dancer ? 'text-slate-800 font-semibold' : 'text-slate-400'}">${dance.dancer || '-'}</td>
                        <td class="px-3 py-3">${dance.division ? `<span class="text-xs px-2 py-1 rounded ${divisionClass}">${dance.division}</span>` : '-'}</td>
                        <td class="px-3 py-3">${dance.type && !isAwards ? `<span class="text-xs px-2 py-1 rounded ${typeClass}">${dance.type}</span>` : isAwards ? 'üèÜ' : '-'}</td>
                    </tr>
                `;
            });

            html += `
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs">
                        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded division-junior"></span> Junior</div>
                        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded division-preteen"></span> PreTeen</div>
                        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded division-teen"></span> Teen</div>
                        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded division-senior"></span> Senior</div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        // --- Render Food ---
        function renderFood(container) {
            let html = `
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-violet-50 to-purple-50 p-4 rounded-xl border border-violet-100">
                        <h2 class="text-xl font-bold text-violet-800 mb-2">Places to Eat</h2>
                        <p class="text-sm text-slate-600">Near ${eventInfo.venue}</p>
                    </div>

                    <!-- Map -->
                    <div class="glass-card rounded-xl overflow-hidden">
                        <div class="p-3 bg-slate-50 border-b border-slate-200">
                            <h3 class="font-semibold text-slate-700">üìç Area Map</h3>
                        </div>
                        <div id="food-map" class="h-64 w-full"></div>
                    </div>

                    <!-- Walkable Restaurants -->
                    <div class="glass-card rounded-xl overflow-hidden">
                        <div class="p-4 bg-green-50 border-b border-green-100">
                            <h3 class="font-bold text-green-800">üö∂ Walking Distance</h3>
                        </div>
                        <div class="divide-y divide-slate-100">
            `;

            placesToEat.walkable.forEach(place => {
                html += `
                    <div class="p-4 hover:bg-slate-50">
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="font-semibold text-slate-800">${place.name}</div>
                                <div class="text-sm text-slate-500">${place.type} ‚Ä¢ ${place.price}</div>
                                <div class="text-xs text-slate-400 mt-1">${place.address}</div>
                                ${place.note ? `<div class="text-xs text-green-600 mt-1">${place.note}</div>` : ''}
                            </div>
                            <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full">${place.distance}</span>
                        </div>
                    </div>
                `;
            });

            html += `
                        </div>
                    </div>

                    <!-- Delivery Options -->
                    <div class="glass-card rounded-xl overflow-hidden">
                        <div class="p-4 bg-orange-50 border-b border-orange-100">
                            <h3 class="font-bold text-orange-800">üöó Delivery Options</h3>
                        </div>
                        <div class="divide-y divide-slate-100">
            `;

            placesToEat.delivery.forEach(place => {
                html += `
                    <div class="p-4 hover:bg-slate-50">
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="font-semibold text-slate-800">${place.name}</div>
                                <div class="text-sm text-slate-500">${place.type}</div>
                            </div>
                            <div class="flex flex-wrap gap-1 justify-end">
                                ${place.apps.map(app => `<span class="text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded">${app}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
            initFoodMap();
        }

        let foodMapInstance = null;

        function initFoodMap() {
            if (foodMapInstance) {
                foodMapInstance.remove();
                foodMapInstance = null;
            }

            const mapContainer = document.getElementById('food-map');
            if (!mapContainer) return;

            foodMapInstance = L.map('food-map').setView([eventInfo.venueLat, eventInfo.venueLng], 15);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap'
            }).addTo(foodMapInstance);

            // Hotel marker
            const hotelIcon = L.divIcon({
                className: 'custom-marker',
                html: `<div style="background: #7c3aed; color: white; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); border: 3px solid white;">üè®</div>`,
                iconSize: [36, 36],
                iconAnchor: [18, 18]
            });

            L.marker([eventInfo.venueLat, eventInfo.venueLng], { icon: hotelIcon })
                .addTo(foodMapInstance)
                .bindPopup(`<strong>${eventInfo.venue}</strong><br>${eventInfo.venueAddress}`);

            // Restaurant markers
            placesToEat.walkable.forEach(place => {
                const icon = L.divIcon({
                    className: 'custom-marker',
                    html: `<div style="background: #22c55e; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;">üçΩÔ∏è</div>`,
                    iconSize: [28, 28],
                    iconAnchor: [14, 14]
                });

                L.marker([place.lat, place.lng], { icon })
                    .addTo(foodMapInstance)
                    .bindPopup(`<strong>${place.name}</strong><br>${place.type} ‚Ä¢ ${place.price}<br><em>${place.distance}</em>`);
            });
        }

        // --- Render Activities ---
        function renderActivities(container) {
            let html = `
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-violet-50 to-purple-50 p-4 rounded-xl border border-violet-100">
                        <h2 class="text-xl font-bold text-violet-800 mb-2">Things to Do Nearby</h2>
                        <p class="text-sm text-slate-600">Walking distance activities and DC highlights</p>
                    </div>

                    <!-- Map -->
                    <div class="glass-card rounded-xl overflow-hidden">
                        <div class="p-3 bg-slate-50 border-b border-slate-200">
                            <h3 class="font-semibold text-slate-700">üìç Attractions Map</h3>
                        </div>
                        <div id="activities-map" class="h-72 w-full"></div>
                    </div>

                    <!-- Activities List -->
                    <div class="grid gap-4">
            `;

            nearbyActivities.forEach(activity => {
                html += `
                    <div class="glass-card rounded-xl p-4 hover:shadow-md transition-shadow">
                        <div class="flex items-start gap-4">
                            <div class="text-3xl">${activity.icon}</div>
                            <div class="flex-grow">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="font-bold text-slate-800">${activity.name}</h4>
                                        <div class="text-sm text-violet-600">${activity.type}</div>
                                    </div>
                                    <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full">${activity.distance}</span>
                                </div>
                                <p class="text-sm text-slate-600 mt-2">${activity.note}</p>
                                <p class="text-xs text-slate-400 mt-1">${activity.address}</p>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div></div>`;
            container.innerHTML = html;
            initActivitiesMap();
        }

        let activitiesMapInstance = null;

        function initActivitiesMap() {
            if (activitiesMapInstance) {
                activitiesMapInstance.remove();
                activitiesMapInstance = null;
            }

            const mapContainer = document.getElementById('activities-map');
            if (!mapContainer) return;

            activitiesMapInstance = L.map('activities-map').setView([eventInfo.venueLat, eventInfo.venueLng], 13);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap'
            }).addTo(activitiesMapInstance);

            // Hotel marker
            const hotelIcon = L.divIcon({
                className: 'custom-marker',
                html: `<div style="background: #7c3aed; color: white; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); border: 3px solid white;">üè®</div>`,
                iconSize: [36, 36],
                iconAnchor: [18, 18]
            });

            L.marker([eventInfo.venueLat, eventInfo.venueLng], { icon: hotelIcon })
                .addTo(activitiesMapInstance)
                .bindPopup(`<strong>${eventInfo.venue}</strong><br>Home Base`);

            // Activity markers
            nearbyActivities.forEach(activity => {
                const icon = L.divIcon({
                    className: 'custom-marker',
                    html: `<div style="background: #f59e0b; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 16px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;">${activity.icon}</div>`,
                    iconSize: [32, 32],
                    iconAnchor: [16, 16]
                });

                L.marker([activity.lat, activity.lng], { icon })
                    .addTo(activitiesMapInstance)
                    .bindPopup(`<strong>${activity.name}</strong><br>${activity.note}<br><em>${activity.distance} from hotel</em>`);
            });
        }

    </script>
</body>
</html>
