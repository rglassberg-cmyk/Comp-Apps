<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tremaine Weekend Hub</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Leaflet CSS & JS for Interactive Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Chosen Palette: Soft Rose & Slate -->
    <!-- Application Structure Plan: 
         1. Dashboard Header: Quick status and visual breakdown of Saturday's time allocation.
         2. Tabbed Navigation: Splits the dense itinerary into manageable chunks (Friday, Sat AM, Sat PM, Sat Eve).
         3. Interactive Timeline: Cards for each event that are easy to scan.
         4. "Food & Fuel" Section: Interactive filter to toggle between 'Talia' (Salad) and 'Carly' (Pasta) options.
         5. "Chill Zone" Checklist: Interactive checklist for packing/room prep.
         6. Quick Reference Grid: Key addresses with visual emphasis.
         This structure prioritizes mobile usability for "on-the-go" moms in NYC. -->
    
    <!-- Visualization & Content Choices:
         1. Report Info: Saturday Schedule Duration -> Goal: Visualize balance -> Viz: Doughnut Chart -> Interaction: None (Visual Anchor) -> Justification: Shows the ratio of Walking vs. Chilling vs. Competing.
         2. Report Info: Lunch Options -> Goal: Simplify choice -> Viz: Filterable Cards -> Interaction: Click 'Talia' or 'Carly' buttons -> Justification: Reduces cognitive load when ordering lunch.
         3. Report Info: Packing List -> Goal: Organization -> Viz: Checkbox List -> Interaction: Toggle completed items -> Justification: Practical utility. 
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
        }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 250px;
        }

        /* Custom Scrollbar for clean look */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        .tab-active {
            border-bottom: 2px solid #fb7185; /* Rose 400 */
            color: #be123c; /* Rose 700 */
            font-weight: 600;
        }
        
        .tab-inactive {
            color: #64748b; /* Slate 500 */
        }
        
        .tab-inactive:hover {
            color: #334155;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(4px);
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header / Dashboard -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-2xl mx-auto px-4 py-3 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold text-rose-500 tracking-tight">ü©∞ Tremaine Weekend</h1>
                <p class="text-xs text-slate-500">NYC ‚Ä¢ Friday & Saturday</p>
            </div>
            <div id="clock" class="text-sm font-semibold text-slate-600 bg-slate-100 px-3 py-1 rounded-full">
                <!-- Clock injected via JS -->
            </div>
        </div>
        
        <!-- Navigation Tabs -->
        <nav class="max-w-2xl mx-auto px-2 flex space-x-1 overflow-x-auto no-scrollbar" id="nav-container">
            <!-- Tabs injected via JS -->
        </nav>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-2xl mx-auto w-full p-4 space-y-6">

        <!-- Intro Section (Context) -->
        <section id="intro-section" class="animate-fade-in">
            <div class="bg-gradient-to-r from-rose-50 to-white p-4 rounded-xl border border-rose-100 mb-4">
                <h2 class="text-lg font-semibold text-rose-800 mb-2">Welcome to the Weekend!</h2>
                <p class="text-sm text-slate-600 leading-relaxed">
                    This interactive guide breaks down the schedule for Becca and Aviva. 
                    Use the tabs above to navigate between <strong>Friday Solo Night</strong>, the <strong>Saturday Mom Walk</strong>, and the <strong>Pre-Comp Chill Zone</strong>.
                </p>
            </div>

            <!-- Chart: Saturday Balance -->
            <div class="glass-card rounded-xl p-4">
                <h3 class="text-sm font-semibold text-slate-700 mb-2 text-center">Saturday Time Breakdown</h3>
                <div class="chart-container">
                    <canvas id="weekendChart"></canvas>
                </div>
                <p class="text-xs text-center text-slate-400 mt-2">Estimated activity split for Saturday</p>
            </div>
        </section>

        <!-- Dynamic Content Container -->
        <div id="content-container">
            <!-- Content injected via JS based on active tab -->
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-50 border-t border-slate-200 py-6 mt-8">
        <div class="max-w-2xl mx-auto px-4 text-center">
            <p class="text-xs text-slate-400">Created for the Dance Moms üíÉ</p>
            <p class="text-xs text-slate-300 mt-1">Don't forget the grilled chicken!</p>
        </div>
    </footer>

    <!-- JavaScript Application Logic -->
    <script>
        // --- State Management ---
        const state = {
            currentTab: 'friday',
            lunchFilter: 'all', // 'all', 'talia', 'carly'
            checklist: {
                'Snacks': false,
                'Games': false,
                'Spa': false
            }
        };

        // --- Data: Itinerary ---
        const itineraryData = {
            friday: {
                title: "Friday: Solo Night üåô",
                desc: "Focus on supporting Talia's solo performance (9:14pm). Keep it light and calm.",
                events: [
                    { time: "5:30 PM", title: "Early Light Dinner", icon: "ü•ó", details: "Order DoorDash: Sweetgreen or Just Salad. Add home-grilled chicken. Keep it light!" },
                    { time: "9:14 PM", title: "Talia's Solo - Foolish Games", icon: "üíÉ", details: "Senior Lyrical Solo. Performance time 9:14-9:17 PM." },
                    { time: "9:30 PM", title: "Post-Solo Snacks", icon: "ü•®", details: "In-room recovery: Pretzels, fruit, cheese sticks. Bagel/toast if hungry." },
                    { time: "10:30 PM", title: "Lights Out", icon: "üõå", details: "Early rest for the big day tomorrow." }
                ]
            },
            saturdayAM: {
                title: "Saturday Morning: Moms' Walk ‚òï",
                desc: "9:00 AM - 1:00 PM. While girls are in classes, explore Midtown & Bryant Park.",
                events: [
                    { time: "9:00 AM", title: "Wake Up & Get Ready", icon: "‚òÄÔ∏è", details: "Take your time getting ready. No rush!" },
                    { time: "9:30 AM", title: "Coffee & Planning", icon: "‚òï", details: "Joe Coffee (44th & 6th) or Bluestone Lane (45th). Plan the morning." },
                    { time: "10:00 AM", title: "Bryant Park Stroll", icon: "üå≥", details: "Winter Village kiosks, heated seating. Calmer than Times Square." },
                    { time: "10:45 AM", title: "Warm-Up Stop", icon: "üèõÔ∏è", details: "NY Public Library (Rose Reading Room) or Grand Central Terminal." },
                    { time: "11:30 AM", title: "5th Ave Window Shop", icon: "üõçÔ∏è", details: "St. Patrick's Cathedral & 5th Ave stores." },
                    { time: "12:30 PM", title: "Lunch Pickup", icon: "ü•°", details: "Gather food for the girls before heading back. See 'Lunch Finder' below." }
                ]
            },
            saturdayPM: {
                title: "Saturday Afternoon: Chill Zone üíÜ‚Äç‚ôÄÔ∏è",
                desc: "1:00 PM - 5:00 PM. Downtime in the hotel room before the evening competition. Focus on Carly getting ready for her solo",
                events: [
                    { time: "1:00 PM", title: "In-Room Picnic", icon: "ü•™", details: "Eat the picked-up lunch. Relax." },
                    { time: "2:00 PM", title: "Games & Spa", icon: "üíÖ", details: "Uno, Bananagrams, Face Masks, Movies." },
                    { time: "3:00 PM", title: "Sugar Distraction (Optional)", icon: "üç™", details: "If nerves hit: Walk to Schmackary's, Van Leeuwen, or Junior's." },
                    { time: "4:30 PM", title: "Pre-Comp Dinner Order", icon: "üì±", details: "Order delivery now for 5pm arrival. Keep it safe/familiar." }
                ]
            },
            saturdayEve: {
                title: "Saturday Night: Competition üèÜ",
                desc: "Evening Session. Focus on getting them fed and ready. Carly's solo at 9:00 PM!",
                events: [
                    { time: "5:00 PM", title: "Dinner Time", icon: "üçù", details: "Eat early. Chipotle, Dig, or Plain Pasta from Joe's Pizza." },
                    { time: "8:15 PM", title: "Cry to Me - Group", icon: "üëØ", details: "Senior Jazz Group. Performance 8:15-8:20 PM." },
                    { time: "8:41 PM", title: "End of Love - Line", icon: "üëØ", details: "Senior Lyrical Line. Performance 8:41-8:46 PM." },
                    { time: "9:00 PM", title: "‚≠ê Carly's Solo - Other Side", icon: "üíÉ", details: "Teen Contemporary Solo. Performance 9:00-9:03 PM." },
                    { time: "9:15 PM", title: "Dead One - Group", icon: "üëØ", details: "Senior Contemporary Group. Performance 9:15-9:20 PM." },
                    { time: "9:29 PM", title: "Kendrick - Group", icon: "üëØ", details: "Senior Hip Hop Group. Performance 9:29-9:34 PM." },
                    { time: "9:54 PM", title: "Cellophane - Group", icon: "üëØ", details: "Senior Lyrical Group. Performance 9:54-9:59 PM." },
                    { time: "10:13 PM", title: "Golden Years - Production", icon: "üåü", details: "Teen Jazz Production. Performance 10:13-10:18 PM." }
                ]
            }
        };

        // --- Data: Lunch Options ---
        const lunchOptions = [
            { name: "Sweetgreen", type: "Salad", for: "Talia", loc: "1450 Broadway" },
            { name: "Dig", type: "Bowls", for: "Talia", loc: "W 45th St" },
            { name: "Pret A Manger", type: "Sandwich/Salad", for: "Talia", loc: "Multiple" },
            { name: "Vapiano", type: "Pasta", for: "Carly", loc: "W 42nd St" },
            { name: "Pasta Lovers", type: "Pasta", for: "Carly", loc: "W 44th St" },
            { name: "Dig (Pasta Option)", type: "Pasta", for: "Carly", loc: "W 45th St" }
        ];

        // --- Data: Addresses ---
        const addresses = [
            { name: "Joe Coffee", addr: "W 44th St & 6th Ave" },
            { name: "Bryant Park", addr: "40th-42nd St & 6th Ave" },
            { name: "Sweetgreen", addr: "1450 Broadway (at 41st)" },
            { name: "Dig", addr: "1407 Broadway (W 45th)" },
            { name: "Schmackary's", addr: "362 W 45th St" },
            { name: "Van Leeuwen", addr: "204 W 48th St" }
        ];

        // --- Data: Walking Map Stops ---
        const walkingStops = [
            { name: "Hotel (Start)", lat: 40.7580, lng: -73.9855, icon: "üè®", order: 1 },
            { name: "Joe Coffee", lat: 40.7565, lng: -73.9850, icon: "‚òï", order: 2 },
            { name: "Bryant Park", lat: 40.7536, lng: -73.9832, icon: "üå≥", order: 3 },
            { name: "NY Public Library", lat: 40.7532, lng: -73.9822, icon: "üèõÔ∏è", order: 4 },
            { name: "Grand Central", lat: 40.7527, lng: -73.9772, icon: "üöÇ", order: 5 },
            { name: "St. Patrick's Cathedral", lat: 40.7585, lng: -73.9760, icon: "‚õ™", order: 6 },
            { name: "5th Ave Shops", lat: 40.7614, lng: -73.9776, icon: "üõçÔ∏è", order: 7 },
            { name: "Sweetgreen (Lunch)", lat: 40.7560, lng: -73.9870, icon: "ü•ó", order: 8 }
        ];

        // --- Data: Dance Order ---
        const danceOrder = {
            friday: [
                { order: 1, name: "That's Life", dancer: "Robbie", division: "PreTeen", style: "Jazz", type: "Solo", start: "7:49 PM", end: "7:52 PM" },
                { order: 2, name: "Tennessee Whiskey", dancer: "Liam", division: "Senior", style: "Contemporary", type: "Solo", start: "8:38 PM", end: "8:41 PM" },
                { order: 3, name: "Out There", dancer: "Alina", division: "Senior", style: "Contemporary", type: "Solo", start: "8:41 PM", end: "8:44 PM" },
                { order: 4, name: "Winner Takes It All", dancer: "Lula", division: "Senior", style: "Contemporary", type: "Solo", start: "8:44 PM", end: "8:47 PM" },
                { order: 5, name: "These Arms of Mine", dancer: "Chloe", division: "Senior", style: "Contemporary", type: "Solo", start: "8:46 PM", end: "8:49 PM" },
                { order: 6, name: "Lose Yourself", dancer: "Riley", division: "Senior", style: "Hip Hop", type: "Solo", start: "9:00 PM", end: "9:03 PM" },
                { order: 7, name: "Foolish Games", dancer: "Talia", division: "Senior", style: "Lyrical", type: "Solo", start: "9:14 PM", end: "9:17 PM", highlight: true },
                { order: 8, name: "One More Moment", dancer: "Talya", division: "Senior", style: "Lyrical", type: "Solo", start: "9:17 PM", end: "9:20 PM" },
                { order: 9, name: "Dreams", dancer: "Ella", division: "Senior", style: "Jazz", type: "Solo", start: "9:22 PM", end: "9:25 PM" }
            ],
            saturday: [
                { order: 1, name: "Cry to Me", dancer: "", division: "Senior", style: "Jazz", type: "Group", start: "8:15 PM", end: "8:20 PM" },
                { order: 2, name: "End of Love", dancer: "", division: "Senior", style: "Lyrical", type: "Line", start: "8:41 PM", end: "8:46 PM" },
                { order: 3, name: "Other Side", dancer: "Carly", division: "Teen", style: "Contemporary", type: "Solo", start: "9:00 PM", end: "9:03 PM", highlight: true },
                { order: 4, name: "Dead One", dancer: "", division: "Senior", style: "Contemporary", type: "Group", start: "9:15 PM", end: "9:20 PM" },
                { order: 5, name: "Kendrick", dancer: "", division: "Senior", style: "Hip Hop", type: "Group", start: "9:29 PM", end: "9:34 PM" },
                { order: 6, name: "Cellophane", dancer: "", division: "Senior", style: "Lyrical", type: "Group", start: "9:54 PM", end: "9:59 PM" },
                { order: 7, name: "Golden Years", dancer: "", division: "Teen", style: "Jazz", type: "Production", start: "10:13 PM", end: "10:18 PM" }
            ]
        };

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderClock();
            renderTabs();
            renderChart(); // Initial chart render
            
            // Set initial tab content (Dashboard view is mostly static, let's load Friday by default or create a 'Summary' tab. 
            // Given the design, we will just load Friday first.)
            switchTab('friday'); 
            
            setInterval(renderClock, 60000); // Update clock every minute
        });

        // --- Functions ---

        function renderClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            document.getElementById('clock').textContent = timeString;
        }

        function renderChart() {
            const ctx = document.getElementById('weekendChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Moms Walk', 'Chill Zone', 'Competition', 'Sleep/Other'],
                    datasets: [{
                        data: [4, 4, 5, 11], // Hours breakdown (updated for 9am wake)
                        backgroundColor: [
                            '#fb7185', // Rose 400 (Walk)
                            '#94a3b8', // Slate 400 (Chill)
                            '#fda4af', // Rose 300 (Comp)
                            '#e2e8f0'  // Slate 200 (Other)
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: "'Outfit', sans-serif",
                                    size: 11
                                },
                                boxWidth: 10,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + ' hrs';
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
        }

        function renderTabs() {
            const tabs = [
                { id: 'friday', label: 'Fri Night' },
                { id: 'saturdayAM', label: 'Sat AM' },
                { id: 'saturdayPM', label: 'Sat PM' },
                { id: 'saturdayEve', label: 'Sat Eve' },
                { id: 'danceOrder', label: 'üé≠ Dance Order' },
                { id: 'quickRef', label: 'üìç Quick Ref' }
            ];
            
            const nav = document.getElementById('nav-container');
            nav.innerHTML = ''; // Clear

            tabs.forEach(tab => {
                const btn = document.createElement('button');
                btn.className = `flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors border-b-2 ${state.currentTab === tab.id ? 'border-rose-400 text-rose-600' : 'border-transparent text-slate-500 hover:text-slate-700'}`;
                btn.textContent = tab.label;
                btn.onclick = () => switchTab(tab.id);
                nav.appendChild(btn);
            });
        }

        function switchTab(tabId) {
            state.currentTab = tabId;
            renderTabs(); // Re-render to update active style

            const container = document.getElementById('content-container');
            const intro = document.getElementById('intro-section');

            // Hide intro on non-timeline tabs to save space
            if (tabId === 'quickRef' || tabId === 'danceOrder') {
                intro.style.display = 'none';
            } else {
                intro.style.display = 'block';
            }

            // Logic to render content based on tab
            if (tabId === 'quickRef') {
                renderQuickRef(container);
            } else if (tabId === 'danceOrder') {
                renderDanceOrder(container);
            } else {
                renderTimeline(container, itineraryData[tabId], tabId);
            }
        }

        function renderTimeline(container, data, tabId) {
            let html = `
                <div class="animate-fade-in space-y-4">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-slate-800">${data.title}</h2>
                        <p class="text-sm text-slate-500 mt-1">${data.desc}</p>
                    </div>
                    <div class="space-y-3">
            `;

            data.events.forEach(event => {
                html += `
                    <div class="glass-card rounded-lg p-4 flex items-start space-x-4 hover:bg-white transition-colors">
                        <div class="flex-shrink-0 w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center text-xl">
                            ${event.icon}
                        </div>
                        <div>
                            <span class="block text-xs font-bold text-rose-500 uppercase tracking-wide">${event.time}</span>
                            <h3 class="text-base font-bold text-slate-700">${event.title}</h3>
                            <p class="text-sm text-slate-500 mt-1">${event.details}</p>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;

            // Special Injection for Saturday AM: Walking Map & Lunch Picker
            if (tabId === 'saturdayAM') {
                html += renderWalkingMap();
                html += renderLunchPicker();
            }

            // Special Injection for Saturday PM: Chill Zone Checklist
            if (tabId === 'saturdayPM') {
                html += renderChillZone();
            }

            html += `</div>`;
            container.innerHTML = html;

            // Re-attach event listeners for dynamic elements
            if (tabId === 'saturdayAM') {
                setupLunchListeners();
                initWalkingMap();
            }
        }

        // --- Sub-Component: Walking Map ---
        function renderWalkingMap() {
            return `
                <div class="mt-8 pt-6 border-t border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">üó∫Ô∏è Interactive Walking Map</h3>
                    <p class="text-sm text-slate-500 mb-4">Tap markers to see stop details. Follow the numbered route!</p>
                    <div id="walking-map" class="w-full h-64 rounded-xl border border-slate-200 overflow-hidden"></div>
                    <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
                        ${walkingStops.map(stop => `
                            <div class="flex items-center space-x-2 bg-white p-2 rounded-lg border border-slate-100">
                                <span class="text-lg">${stop.icon}</span>
                                <span class="text-slate-600"><strong>${stop.order}.</strong> ${stop.name}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        let walkingMapInstance = null;

        function initWalkingMap() {
            // Destroy previous map instance if exists
            if (walkingMapInstance) {
                walkingMapInstance.remove();
                walkingMapInstance = null;
            }

            const mapContainer = document.getElementById('walking-map');
            if (!mapContainer) return;

            // Initialize map centered on Midtown Manhattan
            walkingMapInstance = L.map('walking-map').setView([40.7560, -73.9820], 15);

            // Add tile layer (OpenStreetMap)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(walkingMapInstance);

            // Custom numbered icon
            function createNumberedIcon(number, emoji) {
                return L.divIcon({
                    className: 'custom-marker',
                    html: `<div style="background: linear-gradient(135deg, #fb7185, #f43f5e); color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); border: 2px solid white;">${number}</div>`,
                    iconSize: [32, 32],
                    iconAnchor: [16, 16],
                    popupAnchor: [0, -16]
                });
            }

            // Add markers for each stop
            const markers = [];
            walkingStops.forEach(stop => {
                const marker = L.marker([stop.lat, stop.lng], {
                    icon: createNumberedIcon(stop.order, stop.icon)
                }).addTo(walkingMapInstance);

                marker.bindPopup(`
                    <div style="text-align: center; font-family: 'Outfit', sans-serif;">
                        <div style="font-size: 24px;">${stop.icon}</div>
                        <div style="font-weight: bold; margin-top: 4px;">${stop.name}</div>
                        <div style="color: #64748b; font-size: 12px;">Stop #${stop.order}</div>
                    </div>
                `);
                markers.push([stop.lat, stop.lng]);
            });

            // Draw walking route line
            const routeLine = L.polyline(markers, {
                color: '#fb7185',
                weight: 3,
                opacity: 0.7,
                dashArray: '10, 10'
            }).addTo(walkingMapInstance);

            // Fit map to show all markers
            walkingMapInstance.fitBounds(routeLine.getBounds().pad(0.1));
        }

        // --- Sub-Component: Lunch Picker ---
        function renderLunchPicker() {
            return `
                <div class="mt-8 pt-6 border-t border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">ü•ó Lunch Finder</h3>
                    <p class="text-sm text-slate-500 mb-4">Quickly filter options for each girl.</p>
                    
                    <div class="flex space-x-2 mb-4">
                        <button id="btn-all" class="flex-1 py-2 px-3 text-sm rounded-lg ${state.lunchFilter === 'all' ? 'bg-slate-800 text-white' : 'bg-slate-200 text-slate-600'}">All</button>
                        <button id="btn-talia" class="flex-1 py-2 px-3 text-sm rounded-lg ${state.lunchFilter === 'talia' ? 'bg-green-600 text-white' : 'bg-green-100 text-green-700'}">ü•ó Talia</button>
                        <button id="btn-carly" class="flex-1 py-2 px-3 text-sm rounded-lg ${state.lunchFilter === 'carly' ? 'bg-orange-500 text-white' : 'bg-orange-100 text-orange-700'}">üçù Carly</button>
                    </div>

                    <div id="lunch-list" class="grid grid-cols-1 gap-2">
                        <!-- Items populated via JS -->
                    </div>
                </div>
            `;
        }

        function setupLunchListeners() {
            document.getElementById('btn-all').onclick = () => filterLunch('all');
            document.getElementById('btn-talia').onclick = () => filterLunch('talia');
            document.getElementById('btn-carly').onclick = () => filterLunch('carly');
            updateLunchList();
        }

        function filterLunch(filter) {
            state.lunchFilter = filter;
            // Update button styles (simple toggle logic re-render for simplicity in this SPA)
            const btns = ['all', 'talia', 'carly'];
            // Re-render whole section would be cleaner in React, but here we just call switchTab again or manually toggle classes. 
            // Let's manually toggle classes for efficiency.
            document.getElementById('btn-all').className = `flex-1 py-2 px-3 text-sm rounded-lg ${filter === 'all' ? 'bg-slate-800 text-white' : 'bg-slate-200 text-slate-600'}`;
            document.getElementById('btn-talia').className = `flex-1 py-2 px-3 text-sm rounded-lg ${filter === 'talia' ? 'bg-green-600 text-white' : 'bg-green-100 text-green-700'}`;
            document.getElementById('btn-carly').className = `flex-1 py-2 px-3 text-sm rounded-lg ${filter === 'carly' ? 'bg-orange-500 text-white' : 'bg-orange-100 text-orange-700'}`;
            
            updateLunchList();
        }

        function updateLunchList() {
            const list = document.getElementById('lunch-list');
            list.innerHTML = '';
            
            const filtered = lunchOptions.filter(item => {
                if (state.lunchFilter === 'all') return true;
                return item.for.toLowerCase() === state.lunchFilter;
            });

            if (filtered.length === 0) {
                list.innerHTML = '<div class="text-sm text-slate-400 text-center py-2">No options found.</div>';
                return;
            }

            filtered.forEach(item => {
                const el = document.createElement('div');
                el.className = "bg-white border border-slate-200 p-3 rounded-lg flex justify-between items-center";
                el.innerHTML = `
                    <div>
                        <div class="font-bold text-slate-700">${item.name}</div>
                        <div class="text-xs text-slate-500">${item.type} ‚Ä¢ ${item.loc}</div>
                    </div>
                    <span class="text-xs font-semibold px-2 py-1 rounded ${item.for === 'Talia' ? 'bg-green-50 text-green-600' : 'bg-orange-50 text-orange-600'}">${item.for}</span>
                `;
                list.appendChild(el);
            });
        }

        // --- Sub-Component: Chill Zone ---
        function renderChillZone() {
            // Checklists
            const items = [
                "Card Games (Uno, Phase 10)",
                "Face Masks / Polish",
                "Popcorn & Pretzels",
                "Fruit & Veggies",
                "Electrolytes (Liquid IV)"
            ];

            let html = `
                <div class="mt-8 pt-6 border-t border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">üéí Packing & Prep Checklist</h3>
                    <div class="space-y-2">
            `;

            items.forEach((item, idx) => {
                html += `
                    <label class="flex items-center space-x-3 bg-white p-3 rounded-lg border border-slate-200 cursor-pointer select-none">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-rose-500 rounded border-slate-300 focus:ring-rose-500" onclick="this.parentElement.classList.toggle('opacity-50')">
                        <span class="text-sm text-slate-700">${item}</span>
                    </label>
                `;
            });

            html += `</div></div>`;
            return html;
        }

        // --- Component: Quick Ref ---
        function renderQuickRef(container) {
            let html = `
                <div class="animate-fade-in">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-slate-800">üìç Addresses</h2>
                        <p class="text-sm text-slate-500">Tap address to copy to clipboard (simulated).</p>
                    </div>
                    <div class="grid grid-cols-1 gap-3">
            `;

            addresses.forEach(addr => {
                html += `
                    <div class="glass-card p-4 rounded-lg flex items-center justify-between">
                        <div>
                            <h4 class="font-bold text-slate-700">${addr.name}</h4>
                            <p class="text-sm text-slate-500">${addr.addr}</p>
                        </div>
                        <button onclick="alert('Address copied: ${addr.addr}')" class="text-rose-500 bg-rose-50 p-2 rounded-full hover:bg-rose-100 transition">
                            <span class="text-xl">üìã</span>
                        </button>
                    </div>
                `;
            });

            html += `</div></div>`;
            container.innerHTML = html;
        }

        // --- Component: Dance Order ---
        function renderDanceOrder(container) {
            let html = `
                <div class="animate-fade-in">
                    <div class="mb-6">
                        <h2 class="text-xl font-bold text-slate-800">üé≠ Dance Order & Times</h2>
                        <p class="text-sm text-slate-500">Complete competition schedule for both days</p>
                    </div>

                    <!-- Friday Section -->
                    <div class="mb-8">
                        <h3 class="text-lg font-bold text-rose-600 mb-3 flex items-center">
                            <span class="bg-rose-100 px-3 py-1 rounded-full">Friday 1/30/2026</span>
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-slate-100">
                                    <tr>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">#</th>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">Dance</th>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">Style</th>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">Type</th>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">Time</th>
                                    </tr>
                                </thead>
                                <tbody>
            `;

            danceOrder.friday.forEach(dance => {
                const rowClass = dance.highlight ? 'bg-yellow-50 border-l-4 border-yellow-400' : 'bg-white';
                const nameDisplay = dance.dancer ? `${dance.name} - <span class="font-semibold">${dance.dancer}</span>` : dance.name;
                html += `
                    <tr class="${rowClass} border-b border-slate-100">
                        <td class="px-2 py-3 text-slate-500">${dance.order}</td>
                        <td class="px-2 py-3 text-slate-800">${nameDisplay}</td>
                        <td class="px-2 py-3 text-slate-600">${dance.style}</td>
                        <td class="px-2 py-3"><span class="text-xs px-2 py-1 rounded-full ${dance.type === 'Solo' ? 'bg-rose-100 text-rose-700' : 'bg-blue-100 text-blue-700'}">${dance.type}</span></td>
                        <td class="px-2 py-3 text-slate-600 font-mono text-xs">${dance.start}</td>
                    </tr>
                `;
            });

            html += `
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Saturday Section -->
                    <div>
                        <h3 class="text-lg font-bold text-rose-600 mb-3 flex items-center">
                            <span class="bg-rose-100 px-3 py-1 rounded-full">Saturday 1/31/2026</span>
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-slate-100">
                                    <tr>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">#</th>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">Dance</th>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">Style</th>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">Type</th>
                                        <th class="px-2 py-2 text-left text-xs font-semibold text-slate-600">Time</th>
                                    </tr>
                                </thead>
                                <tbody>
            `;

            danceOrder.saturday.forEach(dance => {
                const rowClass = dance.highlight ? 'bg-yellow-50 border-l-4 border-yellow-400' : 'bg-white';
                const nameDisplay = dance.dancer ? `${dance.name} - <span class="font-semibold">${dance.dancer}</span>` : dance.name;
                html += `
                    <tr class="${rowClass} border-b border-slate-100">
                        <td class="px-2 py-3 text-slate-500">${dance.order}</td>
                        <td class="px-2 py-3 text-slate-800">${nameDisplay}</td>
                        <td class="px-2 py-3 text-slate-600">${dance.style}</td>
                        <td class="px-2 py-3"><span class="text-xs px-2 py-1 rounded-full ${dance.type === 'Solo' ? 'bg-rose-100 text-rose-700' : dance.type === 'Production' ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700'}">${dance.type}</span></td>
                        <td class="px-2 py-3 text-slate-600 font-mono text-xs">${dance.start}</td>
                    </tr>
                `;
            });

            html += `
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                        <p class="text-sm text-yellow-800"><strong>‚≠ê Highlighted:</strong> Talia & Carly's solos</p>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

    </script>
</body>
</html>
